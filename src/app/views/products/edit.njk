{% extends "layout.njk" %} {% block content %}

<section class="container form">
  <form
    action="/products?_method=PUT"
    method="POST"
    enctype="multipart/form-data"
  >
    <div class="header">
      <h3>Editar Produto</h3>
    </div>

    <div class="fields">
      {% include "products/fields.njk" %}
      <input type="hidden" name="id" value="{{ product.id }}" />
    </div>

    <button class="button edit" type="submit">Atualizar</button>
  </form>

  <form id="form-delete" action="/products?_method=DELETE" method="POST">
    <input type="hidden" name="id" value="{{ product.id }}" />
    <button class="button delete" type="submit">Excluir</button>
  </form>
</section>

<!-- Script de confirmação da exclusão do produto -->
<script>
  const formDelete = document.querySelector("#form-delete");
  formDelete.addEventListener("submit", function(e) {
    const confirmation = confirm("Deseja Excluir?");
    if (!confirmation) {
      e.preventDefault();
    }
  });
</script>

{% endblock content %}
